-- Création des tables
CREATE TABLE IF NOT EXISTS players (
  id UUID PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS games (
  id UUID PRIMARY KEY,
  created_at TIMESTAMP NOT NULL DEFAULT NOW(),
  status VARCHAR(20) NOT NULL,
  max_players INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS wonders (
  id UUID PRIMARY KEY,
  name VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS game_players (
  id UUID PRIMARY KEY,
  game_id UUID NOT NULL REFERENCES games(id) ON DELETE CASCADE,
  player_id UUID NOT NULL REFERENCES players(id) ON DELETE CASCADE,
  UNIQUE(game_id, player_id)
);

-- Insertion des merveilles de base (côté A)
INSERT INTO wonders (id, name) VALUES
  ('11111111-1111-1111-1111-111111111111', 'Gizeh'),
  ('22222222-2222-2222-2222-222222222222', 'Babylone'),
  ('33333333-3333-3333-3333-333333333333', 'Rhodes'),
  ('44444444-4444-4444-4444-444444444444', 'Halicarnasse'),
  ('55555555-5555-5555-5555-555555555555', 'Olympie'),
  ('66666666-6666-6666-6666-666666666666', 'Éphèse'),
  ('77777777-7777-7777-7777-777777777777', 'Alexandrie')
ON CONFLICT (id) DO NOTHING; 